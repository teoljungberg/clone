.Dd January 5, 2024
.Dt CLONE 1
.Os
.Sh NAME
.Nm clone
.Nd git-clone(1) repositories into a pre-determined directory structure
.Sh SYNOPSIS
.Nm clone
.Op Fl n
.Ar pattern
.Sh DESCRIPTION
clone git repositories over ssh or https into a specific directory structure.
The program is also directory aware, meaning it can understand and use the
current directory structure to determine the clone path for a repository.
.Sh REPOSITORY PATTERN
The program accepts the following patterns for the repository:
.Bl -dash
.It
git@host:user/repository
.It
git@host:user/repository.git
.It
https://host/user/repository
.It
https://host/user/repository.git
.It
user/repository
.It
repository
.El
.Pp
The two latter are only available of the program is run inside the known
directory structure.
.Sh DIRECTORY STRUCTURE
The default directory pattern for the cloned repositories is:
.Pp
.Dl $HOME/src/host/user/repository
.Pp
The clone path can be configured at compile time using the
.Ev CLONE_PATH
variable.
For example:
.Pp
.Dl % make CLONE_PATH=~/projects
.Pp
This supports both tilde expansion and absolute paths:
.Pp
.Dl % make CLONE_PATH=~/dev/repositories
.Dl % make CLONE_PATH=/opt/code
.Sh DIRECTORY AWARENESS
When executed inside a project structure, the program uses the existing project
path structure to determine the clone path.
.Sh EXAMPLES
To clone a repository from GitHub over ssh:
.Pp
.Dl % clone git@github.com:user/repository
.Pp
To clone a repository from GitHub over https:
.Pp
.Dl % clone https://github.com/user/repository
.Pp
To clone a repository from a custom git host:
.Pp
.Dl % clone git@host:user/repository
.Pp
To clone a repository while inside the directory structure:
.Pp
.Dl % pwd
.Dl   /home/user/src/github.com/user
.Dl % clone repository
.Pp
To output the git clone command without executing it:
.Pp
.Dl % clone -n git@github.com:user/repository
.Pp
To build with a custom clone path:
.Pp
.Dl % make CLONE_PATH=~/projects
.Dl % ./clone git@github.com:user/repository
.Dl   # Clones to ~/projects/github.com/user/repository
.Sh AUTHORS
.An Teo Ljungberg <teo@teoljungberg.com>
